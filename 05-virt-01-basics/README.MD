Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."
=
Задача 1
==
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

Ответ: 
--
Полная виртуализация подразумевает полную изоляцию гостевой ОС от аппаратного обеспечения.
При использовании паравирутализации достигается частичная изоляция гостевой ОС, но для работы требуется модификация ядра гостевой ОС для обеспечения доступа к аппартному обеспечению сервера. 
Виртуализация уровня ОС предполагает, что гостевая ОС использует то же ядро, что и хост. Например контенеры для приложений.

Задача 2
==
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Ответ:
--
Высоконагруженная база данных, чувствительная к отказу - паравиртуализация
Я думаю, что отказоустойчивость таких систем как БД достигается за счет использования репликации, которая существенно дешевле обходится при использовании нескольких виртуальных машин, не же ли использования нескольких физических серверов. Так же скорость восстановления работоспособности, безопасность и высокая достигается путем виртуализации. 

Различные web-приложения - Виртуализация уровня ОС
Используются только те ресурсы, которое требует приложение. Возможность масштабирования за счет ресурсов ОС.

Системы, выполняющие высокопроизводительные расчеты на GPU. - физические сервера

В таких системах требуется доступ к ядрам GPU, которые, конечно, можно "пробросить в ВМ", но скорость работы и стабильность в системах отличных от физической среды, остается под вопросом. (Хотя многие облачные провайдеры предлагают использовать вычисления на GPU, скорее всего это физические сервера)

Windows системы для использования бухгалтерским отделом - физические сервера

В основном бухгалтерским отделом используется ПО с высокими требованиями к дисковой подсистеме, а так же к большим объемам оперативной памяти(1С например).

Задача 3
==
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1) 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2) Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3) Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4) Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Ответ:
--
1) Я бы выбрал Hyper-V, Proxmox. Оба решения одинаково хорошо подходят: поддержка кластеризации(балансировка нагрузки из коробки), автоматизация создания резервных копий, репликация и балансировщики нагрузок
2) Proxmox. С легкостью работает с более чем 30 виртуальными машинами. Есть Community Edition. Есть поддержка контейнеризации на LXC, большое количество готовых образов для разворачивания любых систем.
3) Hyper-V Server, отлично подходит для Windows инфраструктуры. Но требуются знания powershell, есть Web based GUI - Windows Admin Center
4) LXC-контейнеры и KVM- отлично подходят для тестирования рабочих окружений. 

Задача 4
==
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Ответ:
--
К проблемам и недостаткам таких систем я бы отнес: 
- сложность поддержки
- нет возможности построения полной отказоустойчивости между разными СВ(возможность миграции ВМ из одной среды в другую)
- финансовые и временные затраты на поддержку


Что бы я сделал, для минимизации таких проблем:
- документирование настроенных систем
- резервное копирование с тестирование бэкапов на работоспособность
- не стал бы использовать гетерогенные системы

Если бы у меня был выбор, то я бы однозначно не стал использовать гетерогенные системы. Например, чтобы совершить ручную миграцию ВМ из Hyper-V в KVM, требуется конвертация виртуального HDD в RAW или qcow2, что требует времени(зависит от объема), и не факт, что образ запустится без проблем на другой СВ. Как пример, конвертация vhdx в raw и заливка образа в OpenStack.